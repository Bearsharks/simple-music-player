{"version":3,"sources":["Spinner.module.css","Spinner.js","refs/constants.js","recoilStates/atoms/musicListStates.js","refs/keyGenerator.js","refs/storeStateManager.js","recoilStates/musicListStateManager.js","refs/youtubeSearch.js","MusicList/QueryDetail.js","MusicList/MusicListEle.js","MusicList/MusicListDraggable.js","App.js","index.js"],"names":["module","exports","Spinner","className","styles","spinnerWrapper","spinner","xmlns","height","viewBox","width","fill","d","INVALID_MUSIC_INFO","idx","id","key","musicListState","atom","default","curMusicIndexState","curMusicInfoState","selector","get","list","length","set","params","cur","curcnt","storeManager","this","_storage","Map","_storage_cnt","store","bind","delete","Error","item","JSON","parse","localStorage","getItem","setItem","stringify","cnt","removeItem","musicListStateManager","ml","ci","musicList","setMusicList","curMusicIndex","setCurMusicIndex","goNextMusic","goPrevMusic","reorderMusicList","deleteMusic","appendMusicList","modMusicList","initMusicInfo","updateMusicList","selectMusic","from","to","result","Array","splice","removed","isCurMusic","isGoToNextFromPrev","isGoToPrevFromNext","musicInfo","isAlone","window","q","isLast","isPrevMusic","filter","index","newMusicQueryList","element","keys","Date","now","map","el","keyGenerator","newMusicList","info","newListStartIndex","videoId","i","query","items","itemIdx","youtubeSearch","a","part","maxResults","type","topic","Object","k","encodeURIComponent","join","youtubeKey","url","fetch","method","res","status","json","alert","QueryDetail","selectQuery","curItemId","hide","useState","setItems","selectedQueryIdx","setSelectedQueryIdx","useEffect","storageValue","ytsearch","data","console","error","parseInt","onClick","e","stopPropagation","onCilckHandler","style","color","src","snippet","thumbnails","alt","title","MusicListEle","props","isDetailOpened","setDetailOpened","ele","preventDefault","deleteMusicHandler","memo","draggableId","provided","snapshot","ref","innerRef","draggableProps","dragHandleProps","border","App","musicListRaw","setMusicListRaw","isInited","setIsInited","musicListRecoilState","useRecoilState","curMusicIndexRecoilState","mlsm","playCallback","stopCallBack","curMusicInfo","setCurMusicInfo","prevInfoRef","useRef","current","storeStateManager","useInitMusicPlayer","player","loadVideoById","then","catch","err","stopVideo","goNextMusicRef","YT","tag","document","createElement","firstScriptTag","getElementsByTagName","parentNode","insertBefore","onYouTubeIframeAPIReady","Player","events","event","onChange","target","value","split","onDragEnd","destination","source","onDragStart","droppableId","placeholder","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7d178501.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"Spinner_spinnerWrapper__1sjWi\",\"spinner\":\"Spinner_spinner__3jVAw\",\"rotate\":\"Spinner_rotate__1hbt0\"};","\r\nimport styles from './Spinner.module.css';\r\nfunction Spinner() {\r\n    return (\r\n        <div className={styles.spinnerWrapper}>\r\n            <div className={styles.spinner}>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"40px\" viewBox=\"0 0 24 24\" width=\"40px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\" /><path d=\"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z\" /></svg>\r\n            </div>\r\n            <div>불러오는 중...</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Spinner;","export const INVALID_MUSIC_INFO = { idx: -1, id: null, key: null };\r\n","import { atom, selector } from 'recoil';\r\nimport { INVALID_MUSIC_INFO } from '../../refs/constants';\r\nexport const musicListState = atom({\r\n    key: 'musicListState',\r\n    default: []\r\n})\r\nexport const curMusicIndexState = atom({\r\n    key: 'curMusicIndexState',\r\n    default: INVALID_MUSIC_INFO.idx\r\n})\r\nexport const curMusicInfoState = selector({\r\n    key: 'curMusicInfoState',\r\n    get: ({ get }) => {\r\n        const list = get(musicListState);\r\n        const idx = get(curMusicIndexState);\r\n        if (idx === INVALID_MUSIC_INFO.idx || list.length === 0) {\r\n            return INVALID_MUSIC_INFO;\r\n        }\r\n        return {\r\n            idx: idx,\r\n            ...list[idx]\r\n        }\r\n    },\r\n    set: ({ set }, params) => {\r\n        const [cur, list] = params;\r\n        if (cur) set(curMusicIndexState, cur);\r\n        if (list) set(musicListState, list);\r\n    },\r\n});","let curcnt = 0;\r\n\r\nexport default function keyGenerator(cnt) {\r\n    if (cnt) {\r\n        let cur = Date.now();\r\n        return new Array(cnt).fill(null).map((el, index) => cur + \"_\" + curcnt++);\r\n    }\r\n    return Date.now() + \"_\" + curcnt++;\r\n}","export default class storeManager {\r\n    constructor() {\r\n        this._storage = new Map();\r\n        this._storage_cnt = new Map();\r\n        this.store = this.store.bind(this);\r\n        this.delete = this.delete.bind(this);\r\n        this.get = this.get.bind(this);\r\n        this.set = this.set.bind(this);\r\n    }\r\n    get(key) {\r\n        if (!key) throw new Error(\"store state error : invalid key\");\r\n\r\n        let item = this._storage.get(key);\r\n        if (item) return item;\r\n\r\n        item = JSON.parse(localStorage.getItem(key));\r\n        if (item) {\r\n            this._storage.set(key, item);\r\n            return item;\r\n        }\r\n        return undefined;\r\n    }\r\n    set(key, item) {\r\n        if (!key) throw new Error(\"store state error : invalid key\");\r\n        if (item !== 0 && !item) throw new Error(\"store state error : invalid item\");\r\n        this._storage.set(key, item);\r\n        localStorage.setItem(key, JSON.stringify(item));\r\n        const cnt = this._storage_cnt.get(key);\r\n        if (!cnt) this._storage_cnt.set(key, 1);\r\n    }\r\n\r\n    store(key) {\r\n        if (!key) throw new Error(\"store state error : invalid key\");\r\n        let cnt = this._storage_cnt.get(key);\r\n        this._storage_cnt.set((cnt) ? cnt + 1 : 1);\r\n    }\r\n    delete(key) {\r\n        if (!key) throw new Error(\"store state error : invalid key\");\r\n        let cnt = this._storage_cnt.get(key);\r\n        if (cnt > 1) {\r\n            this._storage_cnt.set(key, cnt - 1);\r\n        } else if (cnt === 1) {\r\n            this._storage_cnt.delete(key);\r\n            this._storage.delete(key);\r\n            localStorage.removeItem(key);\r\n        }\r\n    }\r\n}","import { useEffect, useRef } from 'react';\r\nimport { useRecoilState } from 'recoil';\r\nimport { curMusicInfoState } from \"./atoms/musicListStates\";\r\nimport keyGenerator from '../refs/keyGenerator';\r\nimport { INVALID_MUSIC_INFO } from '../refs/constants';\r\nimport storeStateManager from '../refs/storeStateManager';\r\n\r\n\r\nexport function useInitMusicPlayer(playCallback, stopCallBack) {\r\n    const [curMusicInfo, setCurMusicInfo] = useRecoilState(curMusicInfoState);\r\n    const prevInfoRef = useRef(INVALID_MUSIC_INFO.key);\r\n    useEffect(() => {\r\n        if (!curMusicInfo.key || curMusicInfo.key + curMusicInfo.id === prevInfoRef.current) return;\r\n        //새로운 음악 재생시마다 현재정보를 로컬스토리지에 저장\r\n        window.storeManager.set('curMusicIndex', curMusicInfo.idx);\r\n        if (curMusicInfo.key === INVALID_MUSIC_INFO.key) {\r\n            stopCallBack();\r\n            return;\r\n        }\r\n        prevInfoRef.current = curMusicInfo.key + curMusicInfo.id;\r\n        let info = curMusicInfo;\r\n        if (!curMusicInfo.id) {\r\n            const items = window.storeManager.get(curMusicInfo.q);\r\n            if (items) {\r\n                info = { ...info, id: items[0].id.videoId };\r\n            }\r\n        }\r\n        playCallback(info);\r\n    }, [curMusicInfo]);\r\n\r\n    useEffect(() => {\r\n        if (!window.storeManager) window.storeManager = new storeStateManager();\r\n        const cur = window.storeManager.get('curMusicIndex');\r\n        const list = window.storeManager.get('musicList');\r\n        setCurMusicInfo([cur, list]);\r\n    }, []);\r\n}\r\n\r\nexport class musicListStateManager {\r\n    constructor(ml, ci) {\r\n        this.musicList = ml[0];\r\n        this.setMusicList = ml[1];\r\n\r\n        this.curMusicIndex = ci[0];\r\n        this.setCurMusicIndex = ci[1];\r\n        this.goNextMusic = this.goNextMusic.bind(this);\r\n        this.goPrevMusic = this.goPrevMusic.bind(this);\r\n        this.reorderMusicList = this.reorderMusicList.bind(this);\r\n        this.deleteMusic = this.deleteMusic.bind(this);\r\n        this.appendMusicList = this.appendMusicList.bind(this);\r\n        this.modMusicList = this.modMusicList.bind(this);\r\n        this.initMusicInfo = this.initMusicInfo.bind(this);\r\n        this.updateMusicList = this.updateMusicList.bind(this);\r\n        this.selectMusic = this.selectMusic.bind(this);\r\n    }\r\n    goNextMusic() {\r\n        if (this.curMusicIndex + 1 < this.musicList.length) {\r\n            this.setCurMusicIndex(this.curMusicIndex + 1);\r\n        }\r\n    }\r\n    goPrevMusic() {\r\n        if (this.curMusicIndex - 1 >= 0) {\r\n            this.setCurMusicIndex(this.curMusicIndex - 1);\r\n        }\r\n    }\r\n    reorderMusicList(from, to) {\r\n        if (to === from) return;\r\n        const result = Array.from(this.musicList);\r\n        const [removed] = result.splice(from, 1);\r\n        result.splice(to, 0, removed);\r\n        this.updateMusicList(result);\r\n        const isCurMusic = this.curMusicIndex === from;\r\n        const isGoToNextFromPrev = this.curMusicIndex > from && this.curMusicIndex <= to;\r\n        const isGoToPrevFromNext = this.curMusicIndex < from && this.curMusicIndex >= to;\r\n        if (isCurMusic) {\r\n            this.selectMusic(to);\r\n        } else if (isGoToNextFromPrev) {\r\n            this.goPrevMusic();\r\n        } else if (isGoToPrevFromNext) {\r\n            this.goNextMusic();\r\n        }\r\n\r\n    }\r\n    deleteMusic(idx) {\r\n        const musicInfo = { ...this.musicList[idx], idx: idx };\r\n        const isAlone = this.musicList.length === 1;\r\n        window.storeManager.delete(musicInfo.q);\r\n        if (isAlone) {\r\n            this.updateMusicList([]);\r\n            this.setCurMusicIndex(INVALID_MUSIC_INFO.idx);\r\n            return;\r\n        }\r\n        const isLast = musicInfo.idx === this.musicList.length - 1;\r\n        const isPrevMusic = this.curMusicIndex > musicInfo.idx;\r\n        const isCurMusic = this.curMusicIndex === musicInfo.idx;\r\n        const result = this.musicList.filter((item, index) => index !== musicInfo.idx);\r\n        this.updateMusicList(result);\r\n        if ((isCurMusic && isLast) || isPrevMusic) {\r\n            this.setCurMusicIndex(this.curMusicIndex - 1);\r\n        }\r\n    }\r\n    appendMusicList(newMusicQueryList) {\r\n        newMusicQueryList = newMusicQueryList.filter((element) => element !== \"\");\r\n        if (newMusicQueryList.length < 1) return;\r\n        const keys = keyGenerator(newMusicQueryList.length);\r\n        const newMusicList = newMusicQueryList.map((el, index) => { return { q: el, id: null, key: keys[index] } });\r\n        for (let info of newMusicList) {\r\n            window.storeManager.store(info.q);\r\n        }\r\n        const newListStartIndex = this.musicList.length;\r\n        const result = [...this.musicList, ...newMusicList];\r\n        this.updateMusicList(result);\r\n\r\n        if (this.curMusicIndex === INVALID_MUSIC_INFO.idx) {\r\n            this.setCurMusicIndex(newListStartIndex);\r\n        }\r\n    }\r\n    updateMusicList(list) {\r\n        this.setMusicList(list);\r\n        window.storeManager.set('musicList', list);\r\n    }\r\n    modMusicList(idx, item) {\r\n        const musicInfo = { ...this.musicList[idx], id: item.id.videoId };\r\n        const result = this.musicList.map((item, i) => (idx === i) ? musicInfo : item);\r\n        this.updateMusicList(result);\r\n    }\r\n    initMusicInfo(idx, query, items, itemIdx) {\r\n        if (!itemIdx) itemIdx = 0;\r\n        this.modMusicList(idx, items[itemIdx]);\r\n        window.storeManager.set(query, items);\r\n    }\r\n\r\n    selectMusic(idx) {\r\n        this.setCurMusicIndex(idx);\r\n    }\r\n}","\r\nexport default async function youtubeSearch(q) {\r\n    let params = {\r\n        part: `snippet`,\r\n        maxResults: 5,\r\n        type: `video`,\r\n        topic: `/m/04rlf`,\r\n        q: `${q} audio`\r\n    }\r\n    let query = Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&');\r\n    const fields = `items(id,snippet(title,description,thumbnails))`;\r\n    const key = window.youtubeKey;\r\n    let url = `https://www.googleapis.com/youtube/v3/search?key=${key}&fields=${fields}&${query}`;\r\n    let res = await fetch(url, { method: 'GET' });\r\n    if (res.status === 200) {\r\n        return res.json();\r\n    } else if (res.status === 400) {\r\n        alert('잘못된 키이거나 해당키의 api 할당량을 초과했습니다.');\r\n    }\r\n    throw new Error('request fail');\r\n}","import { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport youtubeSearch from \"../refs/youtubeSearch\";\r\n\r\nexport default function QueryDetail({ query, selectQuery, curItemId, hide }) {\r\n    const [items, setItems] = useState(null);\r\n    const [selectedQueryIdx, setSelectedQueryIdx] = useState(0);\r\n    useEffect(() => {\r\n        if (items) return;\r\n\r\n        const storageValue = window.storeManager.get(query);\r\n        if (storageValue) {\r\n            setItems(storageValue);\r\n            return;\r\n        }\r\n\r\n        async function ytsearch(q) {\r\n            try {\r\n                const data = await youtubeSearch(q);\r\n                window.storeManager.set(q, data.items);\r\n                setItems(data.items);\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n\r\n        }\r\n        ytsearch(query);\r\n    }, []);\r\n    useEffect(() => {\r\n        for (let idx in items) {\r\n            if (items[idx].id.videoId === curItemId) {\r\n                setSelectedQueryIdx(parseInt(idx));\r\n                break;\r\n            }\r\n        }\r\n    }, [items, curItemId]);\r\n\r\n    const onCilckHandler = (e, index) => {\r\n        e.stopPropagation();\r\n        selectQuery(items[index]);\r\n    }\r\n    return (\r\n        <>\r\n            {items &&\r\n                <ul >{\r\n                    items.map(\r\n                        (item, index) => (\r\n                            <li\r\n                                key={item.id.videoId}\r\n                                onClick={e => onCilckHandler(e, index)}\r\n                                style={(selectedQueryIdx === index) ? { color: \"blue\" } : {}}\r\n                            >\r\n                                <img src={item.snippet.thumbnails.default.url} alt={item.snippet.title}></img>\r\n                                {item.snippet.title}\r\n                            </li>\r\n                        )\r\n                    )\r\n                }</ul>\r\n            }\r\n        </>\r\n\r\n    );\r\n}","import { useState } from \"react\";\r\nimport QueryDetail from \"./QueryDetail\";\r\n\r\nexport default function MusicListEle(props) {\r\n    const [isDetailOpened, setDetailOpened] = useState(false);\r\n    const deleteMusicHandler = (e, index) => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        props.deleteMusic(index);\r\n    }\r\n    const togleDetailOpen = (e) => {\r\n        e.stopPropagation();\r\n        setDetailOpened((isDetailOpened) ? false : true)\r\n    }\r\n    const selectQuery = (item) => {\r\n        props.modMusicList(props.index, item);\r\n    }\r\n    return (\r\n        <div>\r\n            {props.ele.q} <button onClick={(e) => deleteMusicHandler(e, props.index)}> X </button >\r\n            <button onClick={togleDetailOpen}>펼치기 </button >\r\n            {isDetailOpened &&\r\n                <QueryDetail query={props.ele.q} selectQuery={selectQuery} curItemId={props.ele.id} />\r\n            }\r\n        </div>\r\n    )\r\n}","import { Draggable } from \"react-beautiful-dnd\";\r\nimport { memo } from 'react'\r\nimport MusicListEle from \"./MusicListEle\";\r\n\r\nexport default memo(function MusicListDraggable(props) {\r\n    return (\r\n        <Draggable\r\n            draggableId={props.ele.key}\r\n            index={props.index}\r\n        >\r\n            {(provided, snapshot) =>\r\n                <li\r\n                    ref={provided.innerRef}\r\n                    {...provided.draggableProps}\r\n                    {...provided.dragHandleProps}\r\n                    onClick={(e) => { props.selectMusic(props.index) }}\r\n                >\r\n\r\n                    <div style={(props.isCurMusic) ? { border: \"1px solid black\" } : {}}>\r\n                        <MusicListEle\r\n                            ele={props.ele}\r\n                            index={props.index}\r\n                            deleteMusic={props.deleteMusic}\r\n                            modMusicList={props.modMusicList}\r\n                        >\r\n                        </MusicListEle>\r\n                    </div>\r\n                </li>\r\n            }\r\n        </Draggable>\r\n    )\r\n});","import './App.scss';\r\nimport Spinner from './Spinner';\r\nimport { useEffect, useRef, useState, memo } from 'react';\r\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\r\nimport { musicListStateManager, useInitMusicPlayer } from \"./recoilStates/musicListStateManager\"\r\nimport { useRecoilState } from 'recoil';\r\nimport { musicListState, curMusicIndexState } from \"./recoilStates/atoms/musicListStates\";\r\nimport MusicListDraggable from './MusicList/MusicListDraggable';\r\nimport youtubeSearch from './refs/youtubeSearch';\r\nfunction App() {\r\n\tconst [musicListRaw, setMusicListRaw] = useState(\"\");\r\n\tconst [isInited, setIsInited] = useState(false);\r\n\tconst musicListRecoilState = useRecoilState(musicListState);\r\n\tconst musicList = musicListRecoilState[0];\r\n\tconst curMusicIndexRecoilState = useRecoilState(curMusicIndexState);\r\n\tconst curMusicIndex = curMusicIndexRecoilState[0];\r\n\tconst mlsm = new musicListStateManager(musicListRecoilState, curMusicIndexRecoilState);\r\n\tconst playMusic = (musicInfo) => {\r\n\t\tif (!window.player) return;\r\n\t\tif (musicInfo.id) {\r\n\t\t\twindow.player.loadVideoById({ videoId: musicInfo.id });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tyoutubeSearch(musicInfo.q)\r\n\t\t\t.then(json => {\r\n\t\t\t\tlet id = json.items[0].id.videoId;\r\n\t\t\t\twindow.player.loadVideoById({ videoId: id });\r\n\t\t\t\tmlsm.initMusicInfo(musicInfo.idx, musicInfo.q, json.items);\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\t}\r\n\tconst stopMusic = () => {\r\n\t\tif (window.player && window.player.stopVideo) window.player.stopVideo();\r\n\t};\r\n\tuseInitMusicPlayer(playMusic, stopMusic);\r\n\r\n\tconst handleTextAreaChange = (e) => {\r\n\t\tsetMusicListRaw(e.target.value);\r\n\t}\r\n\tconst handleChangeYoutubeKey = (e) => {\r\n\t\twindow.youtubeKey = e.target.value;\r\n\t\tlocalStorage.setItem(\"youtubeKey\", e.target.value);\r\n\t}\r\n\tconst musicListAppend = () => {\r\n\t\tif (musicListRaw === \"\") return;\r\n\t\tlet newMusicQueryList = musicListRaw.split(\"\\n\").filter((element) => element !== \"\");\r\n\t\tif (newMusicQueryList.length < 1) return;\r\n\t\tmlsm.appendMusicList(newMusicQueryList);\r\n\t\tsetMusicListRaw(\"\");\r\n\t}\r\n\r\n\tconst goNextMusicRef = useRef();\r\n\tgoNextMusicRef.current = mlsm.goNextMusic;\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tif (!window.YT) { // If not, load the script asynchronously\r\n\t\t\tconst tag = document.createElement('script');\r\n\t\t\ttag.src = 'https://www.youtube.com/iframe_api';\r\n\r\n\t\t\tconst firstScriptTag = document.getElementsByTagName('script')[0];\r\n\t\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n\r\n\t\t\twindow.player = null;\r\n\r\n\t\t\twindow.onYouTubeIframeAPIReady = function () {\r\n\t\t\t\twindow.player = new window.YT.Player('player', {\r\n\t\t\t\t\theight: '480',\r\n\t\t\t\t\twidth: '640',\r\n\t\t\t\t\tevents: {\r\n\t\t\t\t\t\t'onStateChange': (event) => {\r\n\t\t\t\t\t\t\tif (event.data === 0) {\r\n\t\t\t\t\t\t\t\tgoNextMusicRef.current();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tsetIsInited(true);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, []);\r\n\tconst onDragEnd = (result) => {\r\n\t\t// dropped outside the list(리스트 밖으로 드랍한 경우)\r\n\t\tif (!result.destination) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tmlsm.reorderMusicList(result.source.index, result.destination.index);\r\n\t}\r\n\tconst onDragStart = (e) => {\r\n\t\t//console.log(musicList);\r\n\t}\r\n\tconst deleteMusic = (idx) => {\r\n\t\tmlsm.deleteMusic(idx);\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<main>\r\n\t\t\t\t{!isInited && <Spinner></Spinner>}\r\n\t\t\t\t<div className={`playerwrapper`} id={`player`}>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`side`}>\r\n\t\t\t\t\t<input type=\"text\" onChange={handleChangeYoutubeKey} value={localStorage.getItem(\"youtubeKey\")}></input>\r\n\t\t\t\t\t<textarea value={musicListRaw} onChange={handleTextAreaChange} />\r\n\t\t\t\t\t<button onClick={musicListAppend}>append</button>\r\n\t\t\t\t\t<button onClick={mlsm.goPrevMusic} >이전 </button> <button onClick={mlsm.goNextMusic}>다음 </button>\r\n\t\t\t\t\t<DragDropContext\r\n\t\t\t\t\t\tonDragEnd={onDragEnd}\r\n\t\t\t\t\t\tonDragStart={onDragStart}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Droppable droppableId=\"droppable\">\r\n\t\t\t\t\t\t\t{(provided, snapshot) => (\r\n\t\t\t\t\t\t\t\t<ul ref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tmusicList.map((ele, index) =>\r\n\t\t\t\t\t\t\t\t\t\t\t<MusicListDraggable\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={ele.key}\r\n\t\t\t\t\t\t\t\t\t\t\t\tele={ele}\r\n\t\t\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectMusic={mlsm.selectMusic}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteMusic={deleteMusic}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmodMusicList={mlsm.modMusicList}\r\n\t\t\t\t\t\t\t\t\t\t\t\tisCurMusic={(curMusicIndex == index)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t</Droppable>\r\n\t\t\t\t\t</DragDropContext>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</main>\r\n\r\n\t\t</div >\r\n\t);\r\n}\r\n\r\nexport default memo(App);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { RecoilRoot } from 'recoil';\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot>\n      <App />\n    </RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}